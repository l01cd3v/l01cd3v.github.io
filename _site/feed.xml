<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>l01cd3v.github.io</title>
    <description></description>
    <link>https://l01cd3v.github.io</link>
    <atom:link href="https://l01cd3v.github.io/feed.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>IAM user management strategy</title>
        <description>&lt;h3&gt;Use IAM groups&lt;/h3&gt;

&lt;p&gt;When granting privileges to IAM users, AWS account administrators should avoid
use of user-specific policies. Instead, create groups whose name explicitly
defines the members&amp;#39; job functions or responsibilities (&lt;em&gt;e.g.&lt;/em&gt; AWS
Administrators, Operations, Developers, Accountants), and define the
permissions granted within group policies. Doing so will simplify the
permissions management process as changes in group policies apply to all
members.&lt;/p&gt;

&lt;p&gt;When performing AWS configuration reviews, iSEC often discovers IAM users
whose privileges have been granted via a combination of IAM user and IAM group
policies. It is not uncommon to see IAM users who are granted full
administrator privileges in a redundant manner, via both user and group
policies. Such configuration creates an avenue for configuration mistakes, as
another administrator may believe that terminating an IAM user&amp;#39;s membership to
the admin group is sufficient. Therefore, banning use of IAM user policies
will result in making one&amp;#39;s AWS environment less error-prone.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Note&lt;/em&gt;&lt;/strong&gt;: It is on purpose that iSEC recommends using IAM group names that
reflect a job title or responsibility. IAM users who do not fit in such groups
(&lt;em&gt;e.g.&lt;/em&gt; headless users) should not exist. Instead, AWS account administrators
should investigate use of IAM roles for EC2. Further details will be discussed
in an upcoming blog post.&lt;/p&gt;

&lt;h3&gt;Create a common IAM group to apply generic policies&lt;/h3&gt;

&lt;p&gt;Because a number of policies must be applied to all users, iSEC recommends that
AWS account administrators create an IAM group that all IAM users belong to.
Doing so will allow AWS account administrators to consistently grant privileges
and enforce a number of rules.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Note&lt;/em&gt;&lt;/strong&gt;: It is important that all IAM users belong to this common IAM group
to ensure that policies are consistently applied. Failure to do so will create
gaps in one&amp;#39;s AWS environment security posture.&lt;/p&gt;

&lt;h3&gt;Authorize IAM users to manage their credentials&lt;/h3&gt;

&lt;p&gt;To begin with, iSEC recommends that AWS account administrators allow all of
their IAM users to manage their credentials, and only theirs. With all IAM
users belonging to the common IAM group, this can be achieved by applying the
following IAM policy to the group.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;{
  &amp;quot;Version&amp;quot;: &amp;quot;2012-10-17&amp;quot;,
  &amp;quot;Statement&amp;quot;: [
    {
      &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,
      &amp;quot;Action&amp;quot;: [
                 &amp;quot;iam:*AccessKey*&amp;quot;,
                 &amp;quot;iam:*Password&amp;quot;,
                 &amp;quot;iam:*MFADevice*&amp;quot;,
                 &amp;quot;iam:UpdateLoginProfile&amp;quot;
        ],
      &amp;quot;Resource&amp;quot;: &amp;quot;arn:aws:iam::AWS_ACCOUNT_ID:user/${aws:username}&amp;quot;
    },
    {
      &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,
      &amp;quot;Action&amp;quot;: [
                 &amp;quot;iam:CreateVirtualMFADevice&amp;quot;,
                 &amp;quot;iam:DeleteVirtualMFADevice&amp;quot;
      ],
      &amp;quot;Resource&amp;quot;: &amp;quot;arn:aws:iam::AWS_ACCOUNT_ID:mfa/${aws:username}&amp;quot;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While the above policy is sufficient to allow users to manage their
credentials, AWS administrators may consider the following statement as an
addition; it allows IAM users to know what the account&amp;#39;s password policy is.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;{
  &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,
  &amp;quot;Action&amp;quot;: &amp;quot;iam:GetAccountPasswordPolicy&amp;quot;,
  &amp;quot;Resource&amp;quot;: &amp;quot;*&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Use AWS Scout2 to detect user policies&lt;/h3&gt;

&lt;p&gt;The default ruleset used by &lt;a href=&quot;https://github.com/iSECPartners/Scout2&quot;&gt;AWS
Scout2&lt;/a&gt; includes a rule that checks for
user policies and reports the use of user-specific IAM policies as a warning.
Detection of user-specific IAM policies results in the IAM menu dropdown
containing a &amp;quot;User policies&amp;quot; security risk, as illustrated in the below screenshot.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/aws/awsscout2-iam-user-policy-1.png&quot; alt=&quot;Screenshot: IAM menu dropdown with a User policies security risk&quot;&gt;&lt;/p&gt;

&lt;p&gt;When clicked-on, this &amp;quot;User policies&amp;quot; link filters the list of IAM users to only
display those who have at least one user policy attached. The orange badge
indicates a warning and the count of user policies attached to this particular
IAM user.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/aws/awsscout2-iam-user-policy-2.png&quot; alt=&quot;Screenshot: Orange badge indicating that at least one user policy is attached to that IAM user&quot;&gt;&lt;/p&gt;

&lt;h3&gt;Check that all IAM users belong to the common group&lt;/h3&gt;

&lt;p&gt;AWS Scout2 comes with a tool — RulesGenerator.py — that allows AWS account
administrators to generate a custom ruleset to tailor the report to their
needs. An optional IAM rule requires all IAM users to belong to a common IAM
group. In order to enable this rule, the following can be done:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Run the rules generator with the following command line:
&lt;pre style=&quot;margin-left: -20px; margin-top: 10px; margin-bottom: 10px&quot;&gt;&lt;code&gt;./RulesGenerator.py --ruleset_name isec --services iam&lt;/pre&gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Answer &amp;quot;yes&amp;quot; to the question &amp;quot;Would you like to ensure that all IAM users belong to a given IAM group?&amp;quot;&lt;/li&gt;
&lt;li&gt;Enter the name of your common group (&lt;em&gt;e.g.&lt;/em&gt; AllUsers)&lt;/li&gt;
&lt;li&gt;Enter &amp;quot;yes&amp;quot; or &amp;quot;y&amp;quot; to confirm&lt;/li&gt;
&lt;li&gt;Change the level if desired&lt;/li&gt;
&lt;li&gt;Run Scout2&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Note&lt;/em&gt;&lt;/strong&gt;: If you have already run Scout2 and do not wish to download the latest
IAM configuration, use the following command to run an offline analysis:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;./Scout2.py --ruleset_name isec --services iam --local
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The following screenshot illustrates the IAM menu dropdown containing a
security risk when IAM users do not belong to the configured common group.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/aws/awsscout2-iam-user-commongroup-1.png&quot; alt=&quot;Screenshot: IAM menu dropdown when IAM users do not belong to the common group&quot;&gt;&lt;/p&gt;

&lt;p&gt;When clicked-on, this link filters the list of IAM users to only display those
who do not belong to the common IAM group. A colored warning sign appears,
warning about this issue.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/aws/awsscout2-iam-user-commongroup-2.png&quot; alt=&quot;Screenshot: Orange badge indicating that at least one user policy is attached to that IAM user&quot;&gt;&lt;/p&gt;

&lt;h3&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;Strict management of IAM users and tight control of their privileges is key in
maintaining a secure AWS environment. When followed, the above recommendations
should enable AWS administrators to manage IAM users with improved efficiency
and lower the chances of overly privileged users to exist.&lt;/p&gt;
</description>
        <pubDate>Tue, 24 Feb 2015 20:49:00 -0800</pubDate>
        <link>https://l01cd3v.github.io/aws/2015/02/24/iam_user_management.html</link>
        <guid isPermaLink="true">https://l01cd3v.github.io/aws/2015/02/24/iam_user_management.html</guid>
      </item>
    
      <item>
        <title>Do not use your AWS root account</title>
        <description>&lt;h3&gt;What is the AWS root account?&lt;/h3&gt;

&lt;p&gt;The AWS root account is the account that was used -- or created -- when signing
up with Amazon Web Services. This account has full access to all resources in
the account and it is not possible to alter this configuration.&lt;/p&gt;

&lt;h3&gt;Risks of using the AWS root account&lt;/h3&gt;

&lt;p&gt;Using the AWS root account means that there is potential for its compromise.
In particular, iSEC noticed that AWS customers who use the AWS root account
tend to do the following:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Share credentials between employees.&lt;/li&gt;
&lt;li&gt;Disable Multi-Factor Authentication (MFA) for convenience.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Shared credentials, aside from increasing the risk of compromise during the
sharing process, render credential rotation impractical due to the need for the
newly-generated secret to be known by multiple parties. Sharing the AWS root
account also undermines any effort towards using IAM and leveraging the
fine-grained access controls it offers. Finally, shared credentials result in
loss of the attribution ability, which makes auditing harder and may prevent
successful investigation.&lt;/p&gt;

&lt;h3&gt;AWS Identity and Access Management (IAM)&lt;/h3&gt;

&lt;p&gt;AWS IAM allows account administrators to create users for every employee and
grant them access to a limited set of services, actions, and resources. This
allows AWS account administrators to apply the principle of least privilege,
which dictates that a given user should only be able to access the information
and resources that are necessary for them to perform tasks they are responsible
for. Additionally, use of IAM allows AWS users to rotate credentials and revoke
privileges without impacting other employees.&lt;/p&gt;

&lt;p&gt;AWS account administrators should create an &lt;em&gt;Administrator&lt;/em&gt; IAM group, grant
administrator privileges to this group, and create individual IAM users for
each employee in charge of administrating the AWS account. When done, the AWS
root password should be rotated and stored in a safe manner. Furthermore,
additional credentials such as access keys and certificates should be deleted.&lt;/p&gt;

&lt;h3&gt;Important security consideration about the root account&lt;/h3&gt;

&lt;p&gt;AWS users should always enable MFA on their root account, even when the
password is securely stored; it is important to realize that the password reset
for the root account process only requires access to the email address
associated with this account. &lt;strong&gt;This means that, without MFA, your production
environment is only as secure as an email.&lt;/strong&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 23 Feb 2015 08:42:00 -0800</pubDate>
        <link>https://l01cd3v.github.io/aws/2015/02/23/do_not_use_your_root_account.html</link>
        <guid isPermaLink="true">https://l01cd3v.github.io/aws/2015/02/23/do_not_use_your_root_account.html</guid>
      </item>
    
      <item>
        <title>Announcing the AWS blog post series</title>
        <description>&lt;p&gt;Starting this month, iSEC Partners will start a series of blog posts related to
AWS. The goal of these blog posts will be to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Discuss common security gaps in AWS environments&lt;/li&gt;
&lt;li&gt;Discuss common security gaps in the architecture of applications deployed in
the cloud&lt;/li&gt;
&lt;li&gt;Describe methods and tools used to identify these security gaps&lt;/li&gt;
&lt;li&gt;Share tools and scripts that facilitate daily and secure work with AWS&lt;/li&gt;
&lt;li&gt;Share AWS policies that help improve the security posture of AWS environments&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;To share material, iSEC created a new public
&lt;a target=&quot;_blank&quot;
href=&quot;https://github.com/iSECPartners/AWS-recipes&quot;&gt;AWS-recipes&lt;/a&gt; repository
on Github. The tools and policies shared in this repository will be discussed
and explained in dedicated blog articles.&lt;/p&gt;

&lt;p&gt;Because iSEC has been assessing the security of AWS environment for several
years, we have a number of ideas and articles in the pipe awaiting to be
written and published. Our target goal is to publish at least on a bi-monthly
basis at the beginning of the project, and adjust this publication rate after
we catch up.&lt;/p&gt;

&lt;p&gt;Without further due, we will start this series with articles that discuss
Identity and Access Management (IAM) common issues and best practices, and will
present a strategy to improve one&amp;#39;s security posture when using AWS.&lt;/p&gt;
</description>
        <pubDate>Sun, 22 Feb 2015 22:24:00 -0800</pubDate>
        <link>https://l01cd3v.github.io/aws/2015/02/22/announcing_the_aws_blog_post_series.html</link>
        <guid isPermaLink="true">https://l01cd3v.github.io/aws/2015/02/22/announcing_the_aws_blog_post_series.html</guid>
      </item>
    
      <item>
        <title>Intro</title>
        <description>&lt;p&gt;I&amp;#39;m a Security Engineer and, on this blog, I will talk about research projects
I work on, tools that I write and publish, and miscellaneous security and
privacy related subjects.&lt;/p&gt;
</description>
        <pubDate>Sat, 21 Feb 2015 17:00:00 -0800</pubDate>
        <link>https://l01cd3v.github.io/2015/02/21/hello_world.html</link>
        <guid isPermaLink="true">https://l01cd3v.github.io/2015/02/21/hello_world.html</guid>
      </item>
    
  </channel>
</rss>
